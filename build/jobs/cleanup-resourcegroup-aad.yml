jobs:
- job: DeleteResourceGroup
  displayName: 'Delete resource group'
  pool:
    name: '$(SharedLinuxPool)'
    vmImage: '$(LinuxVmImage)'
  steps:
  - task: AzurePowerShell@4
    displayName: 'Delete resource group'
    inputs:
      azureSubscription: $(ConnectedServiceName)
      azurePowerShellVersion: latestVersion
      ScriptType: InlineScript
      Inline: |
        try {
          Get-AzResourceGroup -Name $(ResourceGroupName) | Remove-AzResourceGroup -Verbose -Force
        } catch {
          Write-Warning "Delete Resource Group failed. The resource group may not exist."
        }

- template: ./cleanup-aad.yml
